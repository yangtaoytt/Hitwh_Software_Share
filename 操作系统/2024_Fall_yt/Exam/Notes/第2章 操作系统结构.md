### 第2章 操作系统结构

[TOC]

#### 1. 基本服务包括哪些？
1. **用户界面**：形式有命令行界面（CLI）、图形用户界面（GUI）等。
2. **程序执行**：将程序载入内存并运行。
3. **I/O 操作**：可能涉及文件或设备的输入输出操作。
4. **文件系统操作**：程序需要读写文件和目录。
5. **通信**：进程间可能需要交换信息。
6. **错误检测**：操作系统需要知道可能出现的错误。

#### 2. 增值服务包括哪些？
1. **资源分配**：多个作业并发运行时，系统为它们分配资源。
2. **统计**：需要记录哪些用户使用了多少和什么类型的资源。
3. **保护和安全**：
   - **保护**：确保所有对**系统资源**的访问受控。
   - **安全**：不受**外界**侵犯，延伸到外部I/O设备不受非法访问。

#### 3. CLI 实现在哪里及实现方式？
1. 有的在**内核**中实现，有的通过**系统程序**实现。
2. 有多种**实现方式**：
   - 外壳（shells）：主要作用是获取并执行用户指定的命令。
   - 有些命令是**内置**的，有些只是**程序名**。

#### 4. 系统调用是什么？系统调用特征？
1. **系统调用**：是**操作系统服务的编程接口**。
2. **特征**：
   - 面向**程序**。
   - 通常用**高级语言**编写（如C或C++）。
   - 程序通过**应用程序接口**（API）访问，而不是直接使用系统调用。

#### 5. 系统调用三种使用的 API？
1. Windows 的 **Win32 API**。
2. POSIX 系统（包括几乎所有版本的 UNIX、Linux 和 Mac OS X）的 **POSIX API**。
3. Java 虚拟机（JVM）的 **Java API**。

#### 6. 为什么相比系统调用使用 API 更多？
1. 系统调用：**开销大**，**依赖系统**。
2. API：**易用开销低**、**可移植性强**。

#### 7. printf 使用了什么系统调用？
C 程序库调用 printf()，其调用了 **write()** 系统调用。

#### 8. 系统调用如何实现？
1. 每个系统调用都有一个**固有番号**（System Call Number）。
2. 操作系统通过**系统调用番号表**管理系统调用接口。

#### 9. 系统调用由什么管理？
一般由**运行库**（run-time support library）管理。
- 运行库提供 API，开发者调用**运行库提供的 API** 即可。

#### 10. 如何向系统调用传递参数？
向系统调用函数**传递参数的方式**有以下三种：
1. **寄存器**：直接通过寄存器传递。
2. **块（block）**：参数保存在内存的一个块中，并通过**寄存器**传递块的地址。
3. **栈（stack）**：参数以栈的形式保存在内存中，用户程序通过栈 **push** 参数，操作系统从栈中 **pop** 参数。

#### 10.5. 系统调用的分类

1. **进程**控制（Process Control）。
2. **文件**管理（File Management）。
3. **设备**管理（Device Management）。
4. **信息维护**（Information Maintenance）。
5. **通信**（Communication）。
6. **保护**（Protection）。

#### 11. 什么是系统程序？
1. 提供一个方便的**环境**，以开发程序和执行程序。
2. 系统程序不属于内核，但属于**操作系统的一部分**。
3. 为用户使用操作系统**提供服务**，例如文件管理器：创建、删除、复制、重命名、打印、转储、列出和操作文件和目录。

#### 12. 应用编程和系统编程对比？
1. **应用程序**：旨在生成为**用户直接**提供服务的软件。
2. **系统程序**：旨在生成为**其他软件**提供服务的平台。

#### 13. 系统设计受到什么影响？
系统设计受到**硬件选择**和**系统类型**的影响。

#### 14. 系统设计有哪些目标？
1. **用户目标**：
   - 系统应该方便和容易使用、易学、可靠、安全和快速。
2. **开发目标**：
   - 系统应该容易设计、实现和维护，也应该灵活、可靠、高效且没有错误。

#### 15. 策略和机制的关系？
1. **机制**决定如何做。
2. **策略**决定做什么。
3. 策略与机制的区分对于灵活性很重要，因为**策略**可能会随时间或位置而改变。

#### 16. OS 都有哪些结构？
1. **简单结构**（Simple Structure）。
2. **层次结构**（Layered）。
3. **微内核**（Microkernel）。
4. **模块结构**（Modules）。
5. **混合结构**（Hybrid）。

#### 17. 内核指什么？
内核是**硬件之上**和**系统调用接口之下**的所有部分，包括：
- 文件系统。
- CPU 调度。
- 内存管理。
- 其他操作系统功能。

#### 18. 什么是层次结构？
操作系统划分为若干层，在低层上构建高层。
1. **底层（0 层）**：硬件。
2. **最高层（N 层）**：用户层。
3. 每层只使用**相邻低层**的功能和服务。

#### 19. 层次结构的优缺点？
1. **优点**：
   - 简化了系统设计和实现。
   - 便于调试和升级维护。
2. **缺点**：
   - 层定义困难。
   - 效率较差。

#### 20. 微内核的目的和做法？
1. **目的**：解决内核越来越大，越来越难管理的问题。
2. **做法**：
   - 将尽可能多的功能移到用户空间。
   - 用户模块间的通信使用**消息传递**形式。

#### 21. 微内核的优缺点？
1. **优点**：
   - 便于扩充微内核。
   - 便于移植操作系统到新架构。
   - 更稳定（更少代码运行在核心态）。
   - 更安全。
2. **缺点**：
   - 用户空间和内核空间通信的系统开销增加。

#### 22. 模块结构是什么？
1. 大部分现代操作系统采用**模块**结构。
2. **特点**：
   - 使用面向对象方法，每个核心部件分开。
   - 每个组件在需要时被加载到内核。
   - 每个组件与其他组件的会话被称为接口。
3. 总体而言，模块结构类似于分层方法，但更灵活。

#### 23. 虚拟机定义？
通过软件模拟的具有完整硬件系统功能的、运行在完全隔离环境中的完整计算机系统。

#### 24. 虚拟机特点？
1. 物理计算机的资源被共享，以创建虚拟机。
2. 虚拟机概念提供对系统资源的完全保护，因为每个虚拟机同其他虚拟机隔离。
3. 虚拟机是研发操作系统的完美载体。
4. 由于需要对物理机器进行精确复制，虚拟机实现困难。

#### 25. JVM 是什么？
1. Java 虚拟机有自己的硬件架构（如处理器、堆栈、寄存器等），具有相应的指令系统。
2. JVM 屏蔽了与具体操作系统平台相关的信息，使得 Java 程序只需生成在 Java 虚拟机上运行的目标代码，就可以在多种平台上不加修改地运行。
